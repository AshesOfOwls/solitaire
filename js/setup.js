var zIndexCounter = 99;function zIndex(i) {	// Z-Index Up	$('#card'+i).css('z-index',zIndexCounter);	zIndexCounter++;}function flipCard(id,stack) {	$('#'+id).addClass('front');	$('#'+id).removeClass('back');	createDrag(id,stack);}function generateZones() {	// Setup the card zones	for(i=1;i<14;i++) {		document.write('<div id="zone'+i+'" class="cardZone zone'+i+'"></div>');	}		// Set the first zone to reset	$('#zone1').attr('onclick','pileToDeck()');}function moveToPile(id) {	$('#'+id).addClass('front');	$('#'+id).removeClass('back');	$('#'+id).addClass('zone2');	$('#'+id).removeClass('zone1');	$('#'+id).removeAttr('onClick');	zIndex(id.slice(4));	createDrag(id,2);}function pileToDeck() {	// Run over all the cards with the pile zone	// Start the for loop at 1 to bypass the zone marker	// Add and remove classes to move cards, set click attribute back to normal	var $pile = $('.zone2');    for( var i = 1, n = $pile.length;  i < n;  ++i ) {				var id = $pile[i].id;		var element = document.getElementById(id);		$('#'+id).removeAttr('style');		$('#'+id).addClass('back');		$('#'+id).removeClass('front');		$('#'+id).addClass('zone1');		$('#'+id).removeClass('zone2');		$('#'+id).removeAttr('onClick');		element.setAttribute('onclick','moveToPile(this.id)');		Drag.init(element);		zIndex(id.slice(4));    }}function checkThisStack(id,endStack) {	var thisPile = $('.zone'+endStack);	var thisCardNumber = deck[id][1];	var thisCardSuit = deck[id][2];	var thisCardColor = deck[id][3];	var lowestCardNumber = 15;	var lowestCardSuit = "null";	var lowestCardColor = "null";	if(endStack > 6) {		for(i = 1, n = thisPile.length;  i < n;  i++ ) {			if($('#'+thisPile[i].id).hasClass('front')) {			pileCard = thisPile[i].id.slice(4);			pileCardNumber = deck[pileCard][1];			pileCardSuit = deck[pileCard][2];			pileCardColor = deck[pileCard][3];			if(pileCardNumber < lowestCardNumber) {				lowestCardNumber = pileCardNumber;				lowestCardSuit = pileCardSuit;				lowestCardColor = pileCardColor;			}			}		}		if((lowestCardNumber == 15) && (thisCardNumber == 13)) {			return true;		} else if((lowestCardNumber == 2) && (thisCardNumber == 14) && (thisCardColor != lowestCardColor)) {			return true;		} else if((thisCardNumber == (lowestCardNumber - 1)) && (thisCardColor != lowestCardColor) && (thisCardNumber != 14)) {			return true;		} else {			return false;		}	} else {		lowestCardNumber = 0;		for(i = 1, n = thisPile.length;  i < n;  i++ ) {			pileCard = thisPile[i].id.slice(4);			pileCardNumber = deck[pileCard][1];			pileCardSuit = deck[pileCard][2];			pileCardColor = deck[pileCard][3];			if(pileCardNumber == 14) {				pileCardNumber = 1;			}			if(pileCardNumber > lowestCardNumber) {				lowestCardNumber = pileCardNumber;				lowestCardSuit = pileCardSuit;				lowestCardColor = pileCardColor;			}		}		if((lowestCardNumber == 0) && (thisCardNumber == 14)) {			return true;		} else if((thisCardNumber == (lowestCardNumber+1)) && (thisCardSuit == pileCardSuit)) {			return true;		} else {			return false;		}	}}function createDrag(id,curStack) {	var element = document.getElementById(id);	Drag.init(element,curStack);	element.onDrag = function(x,y) {		$('#'+id).css('z-index',8999);	}	element.onDragEnd = function(x,y) {		if((x>374) && (x<424) && (y>35) && (y<100)) {			if(checkThisStack(id.slice(4),3)) {				setThisStyle(element,3);				createDrag(id,3);			} else {				setThisStyle(element,curStack);			}		} else if((x>487) && (x<537) && (y>35) && (y<100)) {			if(checkThisStack(id.slice(4),4)) {				setThisStyle(element,4);				createDrag(id,4);			} else {				setThisStyle(element,curStack);			}		} else if((x>600) && (x<650) && (y>35) && (y<100)) {			if(checkThisStack(id.slice(4),5)) {				setThisStyle(element,5);				createDrag(id,5);			} else {				setThisStyle(element,curStack);			}		} else if((x>713) && (x<763) && (y>35) && (y<100)) {			if(checkThisStack(id.slice(4),6)) {				setThisStyle(element,6);				createDrag(id,6);			} else {				setThisStyle(element,curStack);			}		} else if((x>35) && (x<85) && (y>182) && (y<232)) {			if(checkThisStack(id.slice(4),7)) {				setThisStyle(element,7);				createDrag(id,7);			} else {				setThisStyle(element,curStack);			}		} else if((x>148) && (x<198) && (y>182) && (y<232)) {			if(checkThisStack(id.slice(4),8)) {				setThisStyle(element,8);				createDrag(id,8);			} else {				setThisStyle(element,curStack);			}		} else if((x>261) && (x<311) && (y>182) && (y<232)) {			if(checkThisStack(id.slice(4),9)) {				setThisStyle(element,9);				createDrag(id,9);			} else {				setThisStyle(element,curStack);			}		} else if((x>374) && (x<424) && (y>182) && (y<232)) {			if(checkThisStack(id.slice(4),10)) {				setThisStyle(element,10);				createDrag(id,10);			} else {				setThisStyle(element,curStack);			}		} else if((x>487) && (x<537) && (y>182) && (y<232)) {			if(checkThisStack(id.slice(4),11)) {				setThisStyle(element,11);				createDrag(id,11);			} else {				setThisStyle(element,curStack);			}		} else if((x>600) && (x<650) && (y>182) && (y<232)) {			if(checkThisStack(id.slice(4),12)) {				setThisStyle(element,12);				createDrag(id,12);			} else {				setThisStyle(element,curStack);			}		} else if((x>713) && (x<763) && (y>182) && (y<232)) {			if(checkThisStack(id.slice(4),13)) {				setThisStyle(element,13);				createDrag(id,13);			} else {				setThisStyle(element,curStack);			}		} else {			setThisStyle(element,curStack);		}	}}function setThisStyle(element,stack) {	var index = element.id.slice(4);	var theSuit = deck[index][2];	if(stack == 1) {		element.setAttribute('style', 'z-index: '+zIndexCounter+';left: 35px; top: 35px;');	} else if(stack == 2) {		element.setAttribute('style', 'z-index: '+zIndexCounter+';left: 148px; top: 35px;');				element.setAttribute('class', 'zone2 '+theSuit+' front');	} else if(stack == 3) {		element.setAttribute('style', 'z-index: '+zIndexCounter+';left: 374px; top: 35px;');				element.setAttribute('class', 'zone3 '+theSuit+' front');	} else if(stack == 4) {		element.setAttribute('style', 'z-index: '+zIndexCounter+';left: 487px; top: 35px;');		element.setAttribute('class', 'zone4 '+theSuit+' front');	} else if(stack == 5) {		element.setAttribute('style', 'z-index: '+zIndexCounter+';left: 600px; top: 35px;');		element.setAttribute('class', 'zone5 '+theSuit+' front');	} else if(stack == 6) {		element.setAttribute('style', 'z-index: '+zIndexCounter+';left: 713px; top: 35px;');		element.setAttribute('class', 'zone6 '+theSuit+' front');	} else if(stack == 7) {		element.setAttribute('style', 'z-index: '+zIndexCounter+';left: 35px; top: 182px;');		element.setAttribute('class', 'zone7 '+theSuit+' front');	} else if(stack == 8) {		element.setAttribute('style', 'z-index: '+zIndexCounter+';left: 148px; top: 182px;');		element.setAttribute('class', 'zone8 '+theSuit+' front');	} else if(stack == 9) {		element.setAttribute('style', 'z-index: '+zIndexCounter+';left: 261px; top: 182px;');		element.setAttribute('class', 'zone9 '+theSuit+' front');	} else if(stack == 10) {		element.setAttribute('style', 'z-index: '+zIndexCounter+';left: 374px; top: 182px;');		element.setAttribute('class', 'zone10 '+theSuit+' front');	} else if(stack == 11) {		element.setAttribute('style', 'z-index: '+zIndexCounter+';left: 487px; top: 182px;');		element.setAttribute('class', 'zone11 '+theSuit+' front');	} else if(stack == 12) {		element.setAttribute('style', 'z-index: '+zIndexCounter+';left: 600px; top: 182px;');		element.setAttribute('class', 'zone12 '+theSuit+' front');	} else if(stack == 13) {		element.setAttribute('style', 'z-index: '+zIndexCounter+';left: 713px; top: 182px;');		element.setAttribute('class', 'zone13 '+theSuit+' front');	}	zIndexCounter++;}Array.prototype.multiSort = function(index){// Written By: WillyDuitt@hotmail.com | 03-10-2005 \\;for(var i=0; i<this.length; i++){var temp = this[i].splice(index,1);this[i].unshift(temp);} return this.sort();} 